<Results>
  <Result>
    <Input>
      <Description>Just TOP</Description>
      <Query>SELECT TOP 5 * FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>Parameterized TOP</Description>
      <Query>SELECT TOP @TOPCOUNT * FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
      <QueryParameters><![CDATA[[
  {
    "name": "@TOPCOUNT",
    "value": 42
  }
]]]></QueryParameters>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>42</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP and non partition filter</Description>
      <Query>SELECT TOP 5 * FROM c WHERE c.blah = 5</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP and partition filter</Description>
      <Query>SELECT TOP 5 * FROM c WHERE c.key = 5</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[5.0],[5.0]]</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP and partition filter</Description>
      <Query>SELECT TOP 5 * FROM c WHERE c.key = 5</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[5.0],[5.0]]</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP 0</Description>
      <Query>SELECT TOP 0 * FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>0</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP 0 with partition key filter</Description>
      <Query>SELECT TOP 0 * FROM c WHERE c.key = 5</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>0</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[5.0],[5.0]]</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP with Aggregate</Description>
      <Query>SELECT TOP 5 VALUE AVG(c.name) FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates>
            <AggregateOperator>Average</AggregateOperator>
          </Aggregates>
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>True</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[SELECT VALUE [{"item": {"sum": SUM(c.name), "count": COUNT(c.name)}}]
FROM c]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP with DISTINCT</Description>
      <Query>SELECT DISTINCT TOP 5 VALUE c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>Unordered</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>True</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[SELECT DISTINCT VALUE c.name
FROM c]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP with GROUP BY</Description>
      <Query>SELECT TOP 5 VALUE c.name FROM c GROUP BY c.name</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>5</Top>
          <Offset />
          <Limit />
          <GroupByExpressions>
            <GroupByExpression>c.name</GroupByExpression>
          </GroupByExpressions>
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>True</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[SELECT [{"item": c.name}] AS groupByItems, c.name AS payload
FROM c
GROUP BY c.name]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP value beyond lower range</Description>
      <Query>SELECT TOP -1 c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <Exception>Microsoft.Azure.Cosmos.Query.Core.Monads.ExceptionWithStackTraceException : TryCatch resulted in an exception.
Microsoft.Azure.Cosmos.Query.Core.Exceptions.ExpectedQueryPartitionProviderException : {"errors":[{"severity":"Error","location":{"start":11,"end":12},"code":"SC1001","message":"Syntax error, incorrect syntax near '-'."}]}
System.Runtime.InteropServices.COMException : 0x800A0B00
</Exception>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP value at lower range</Description>
      <Query>SELECT TOP 0 c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>0</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP value at upper range (client)</Description>
      <Query>SELECT TOP 2147483647 c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>2147483647</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP value beyond upper range (client)</Description>
      <Query>SELECT TOP 2147483648 c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <PartitionedQueryExecutionInfoInternal>
        <QueryInfo>
          <DistinctType>None</DistinctType>
          <Top>2147483648</Top>
          <Offset />
          <Limit />
          <GroupByExpressions />
          <OrderBy />
          <OrderByExpressions />
          <Aggregates />
          <GroupByAliasToAggregateType />
          <GroupByAliases />
          <HasSelectValue>False</HasSelectValue>
        </QueryInfo>
        <QueryRanges>
          <Range>
            <Range>[[],"Infinity")</Range>
          </Range>
        </QueryRanges>
        <RewrittenQuery><![CDATA[]]></RewrittenQuery>
      </PartitionedQueryExecutionInfoInternal>
    </Output>
  </Result>
  <Result>
    <Input>
      <Description>TOP value beyond upper range (Interop)</Description>
      <Query>SELECT TOP 4294967296 c.name FROM c</Query>
      <PartitionKeys>
        <Key>/key</Key>
      </PartitionKeys>
      <PartitionKeyType>Hash</PartitionKeyType>
    </Input>
    <Output>
      <Exception>Microsoft.Azure.Cosmos.Query.Core.Monads.ExceptionWithStackTraceException : TryCatch resulted in an exception.
Microsoft.Azure.Cosmos.Query.Core.Exceptions.ExpectedQueryPartitionProviderException : {"errors":[{"severity":"Error","location":{"start":11,"end":21},"code":"SC2060","message":"The count value provided for a TOP clause must be an integer."}]}
System.Runtime.InteropServices.COMException : 0x800A0B00
</Exception>
    </Output>
  </Result>
</Results>